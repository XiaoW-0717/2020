# 地震数据解析页面

[TOC]

##  前言 

- 将`SEGY`数据写入服务器，进行今解析

- `SeismicAnalysi.vue`
- `SeismicFileRead`





## 1. 后端

- 将服务器中数据返回前端

- `views.py`

  ```python
  # 地震数据解析，获取文件
  @require_http_methods(['GET'])
  def SeismicFileRead(request):
  
      # base_dir = 'c:/'
      base_dir = "././pic/"
      list = os.listdir(base_dir)
  
      filelist = []
      for i in range(0, len(list)):
          path = os.path.join(base_dir, list[i])
          if os.path.isfile(path):
              filelist.append(list[i])
      list_db = []
      content = {}
      for i in range(0, len(filelist)):
          path = os.path.join(base_dir, filelist[i])
          if os.path.isdir(path):
              continue
          # 获取文件的修改时间
          timestamp = os.path.getmtime(path)
          # print(timestamp)
          # 获取文件的修改时间
          # ts1 = os.stat(path).st_mtime
          # print(ts1)
          # 获取文件的大小,结果保留两位小数，单位为MB
          filesize = os.path.getsize(path)
          fsize = filesize/float(1024*1024)
          size = round(fsize, 2)
          filesize = str(size) + 'MB'
          # print(size)
  
          date = datetime.datetime.fromtimestamp(timestamp)
          upload_time = date.strftime('%Y-%m-%d %H:%M:%S')
          # upload_time = date.strftime('%Y-%m-%d')
          # print(list[i], ' 最近修改时间是: ', date.strftime('%Y-%m-%d %H:%M:%S'))
  
          fileinfo = {
              'filename': list[i],
              'filesize': filesize,
              'upload_time': upload_time,
          }
          # print(type(fileinfo))
          # json_str = str(fileinfo)
          # print(type(json_str))
          list_db.append(fileinfo)
          content = json.dumps(list_db)    #这个地方要用字符串传到前端去
      print(content)
      print(type(content))
      return HttpResponse(content, "application/json")
  ```

  

## 2. 前端

- `SeismicAnalysi.vue`

  ```
  
  ```

  