# 地理空间查询

[TOC]

## 前言

- 我们在MongoDB数据库中存入的是经纬度
- 

## 一、多边形查询

- 参见`59mongoengine`使用，对于经纬度查询没什么影响，天地图可以获取点经纬度，以经纬度计算即可。



## 二、圆形查询

- 当进行圆形查询时，面临一个问题：圆心坐标记录的是经纬度，但半径记录的是实际的长度。
- 参照上节`60坐标与经纬度转换`，将半径R转换为度数α

$$
\Delta\alpha = 360*R/W
$$

- 参数R——圆半径距离
- 参数W——地球周长（6381372*2π）
- 参数α——度数



## 三、优化代码结构

- 添加了几何图形的判别：多边形or圆？完成
- 